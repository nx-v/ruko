\* ============================================================
   20 — VARIABLES & PROPERTY ACCESS
   Corresponds to: ruko.tmLanguage.yaml lines 6042–6094
   Property access forms, variable categories (dynamic,
   constant, static), self/super access, and chaining.
   ============================================================ *\

// ----- Basic variable access -----
let a = x           // local variable
let b = Module.x    // qualified access
let c = obj.field   // property access

// ----- Property access (dot notation) -----
let len = arr.length
let ch  = str.chars[0]
let top = stack.peek()
let h   = screen.size.height

// Multi-level chain
let city = user.address.city
let ver  = App.config.version.major

// ----- Optional chain (safe navigation) -----
let name = user?.name             // null if user is null
let city2 = user?.address?.city   // null-safe deep access
let first = arr?.first()
let len2 = maybePair?.0           // optional tuple index

// ----- Force-unwrap access -----
let val1 = optional!.value        // panic if null
let val2 = arr!.first()
let x    = pair!.0

// ----- Arrow access (indirection / pointer deref) -----
let v1 = ptr->value               // pointer dereference
let n1 = node->next->data         // chained pointer dereference

// Optional arrow access
let v2 = ptr?->value
// Force arrow access
let v3 = ptr!->value

// ----- Scope resolution operator (::) -----
let mod  = Module::function       // module-qualified
let enm  = Direction::north       // enum variant
let assoc = T::associated         // associated type/method
let impl2 = Vec<int>::new()       // qualified generic method call

// ----- Self-reference access (#, self, this, super) -----
class Circle {
  val radius: f64

  func area(): f64 {
    Math.PI * self.radius ** 2    // via self
  }

  func perimeter(): f64 {
    2.0 * Math.PI * #radius       // via # shorthand
  }

  func copy(): Circle {
    Circle.new(this.radius)       // via this
  }
}

class ColoredCircle extends Circle {
  val color: str

  func describe(): str {
    #"radius=#super.radius, color=#color"
  }
}

// ----- Index / subscript access -----
let first2 = arr[0]
let last   = arr[arr.len() - 1]
let ch2    = str[5]
let entry  = map["key"]
let row    = matrix[i][j]

// Dynamic key
let v  = obj[dynamicKey]
let v4 = items[idx + offset]

// ----- Tuple index access -----
let fst  = pair.0
let snd  = pair.1
let third = triple.2

// Optional tuple access
let maybeFst = tup?.0

// ----- Dynamic property access -----
// run-time dispatch via string key
let val3 = obj[key]               // dynamic key string
let val4 = obj[#"field_#{n}"]     // interpolated key

// ----- Constant / compile-time property access -----
const MAX_SIZE = Config::MAX_SIZE
const PI       = Math.PI
const VERSION  = App::VERSION

// ----- Static property access -----
let inst_count = Counter.instances
let default_cfg = Config.default
Counter.reset()                   // static method call

// ----- Global variable access -----
let env_path  = process.env.PATH
let win_count = window.innerWidth
let doc_title = document.title

// ----- Prototype chain access -----
let proto = Object.getPrototypeOf(obj)
let hasOwn = obj.hasOwnProperty("key")

// ----- Iterator / generator access -----
let it1 = col.iter()
let it2 = map.entries()
let it3 = range.values()

for item of it1 {
  process(item)
}

// ----- Call chaining with access -----
let result = api
  .getUsers()
  .filter(|u| u.active)
  .map(|u| u.name)
  .sort()
  .first()

// ----- Nullish / fallback access -----
let title = user?.title ?? "Untitled"
let count = opts?.count ??? 0       // three-question null coalesce
let label = val ¿¿ "default"        // Unicode null-coalesce
